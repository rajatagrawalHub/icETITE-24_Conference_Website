jQuery.fn.liveSearch=function(t){var e=jQuery.extend({url:"/search-results.php?q=",id:"jquery-live-search",duration:400,typeDelay:200,loadingClass:"live-search-loading",onSlideUp:function(){},uptadePosition:false},t);var i=jQuery("#"+e.id);if(!i.length){i=jQuery('<div id="'+e.id+'"></div>').appendTo(document.body).hide().slideUp(0);jQuery(document.body).click(function(t){var s=jQuery(t.target);if(!(s.is("#"+e.id)||s.parents("#"+e.id).length||s.is("input"))){i.slideUp(e.duration,function(){e.onSlideUp()})}})}return this.each(function(){var t=jQuery(this).attr("autocomplete","off");var s=parseInt(i.css("paddingLeft"),10)+parseInt(i.css("paddingRight"),10)+parseInt(i.css("borderLeftWidth"),10)+parseInt(i.css("borderRightWidth"),10);var n=function(){var e=t.offset();var n={left:e.left,top:e.top,width:t.outerWidth(),height:t.outerHeight()};n.topPos=n.top+n.height;n.totalWidth=n.width-s;i.css({position:"absolute",left:n.left+"px",top:n.topPos+"px",width:n.totalWidth+"px"})};var o=function(){n();jQuery(window).unbind("resize",n);jQuery(window).bind("resize",n);i.slideDown(e.duration)};var a=function(){i.slideUp(e.duration,function(){e.onSlideUp()})};t.focus(function(){if(this.value!==""){if(i.html()==""){this.lastValue="";t.keyup()}else{setTimeout(o,1)}}}).keyup(function(){if(this.value!=this.lastValue){t.addClass(e.loadingClass);var s=this.value;if(this.timer){clearTimeout(this.timer)}this.timer=setTimeout(function(){jQuery.get(e.url+s,function(n){t.removeClass(e.loadingClass);if(n.length&&s.length){i.html(n);o()}else{a()}})},e.typeDelay);this.lastValue=this.value}})})};