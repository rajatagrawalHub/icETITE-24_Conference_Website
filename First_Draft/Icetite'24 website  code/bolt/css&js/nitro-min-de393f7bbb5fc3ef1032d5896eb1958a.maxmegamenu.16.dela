(function(e){"use strict";e.maxmegamenu=function(n,a){var i=this;var t=e(n);var s=t.siblings(".mega-menu-toggle");var l;var o={event:t.attr("data-event"),effect:t.attr("data-effect"),effect_speed:parseInt(t.attr("data-effect-speed")),effect_mobile:t.attr("data-effect-mobile"),effect_speed_mobile:parseInt(t.attr("data-effect-speed-mobile")),panel_width:t.attr("data-panel-width"),panel_inner_width:t.attr("data-panel-inner-width"),mobile_force_width:t.attr("data-mobile-force-width"),mobile_overlay:t.attr("data-mobile-overlay"),second_click:t.attr("data-second-click"),vertical_behaviour:t.attr("data-vertical-behaviour"),document_click:t.attr("data-document-click"),breakpoint:t.attr("data-breakpoint"),unbind_events:t.attr("data-unbind")};i.settings={};var m=e("li.mega-menu-megamenu.mega-menu-item-has-children,"+"li.mega-menu-flyout.mega-menu-item-has-children,"+"li.mega-menu-tabbed > ul.mega-sub-menu > li.mega-menu-item-has-children,"+"li.mega-menu-flyout li.mega-menu-item-has-children",n);i.addAnimatingClass=function(n){if(i.settings.effect==="disabled"){return}e(".mega-animating").removeClass("mega-animating");var a=i.settings.effect_speed+parseInt(megamenu.timeout,10);n.addClass("mega-animating");setTimeout(function(){n.removeClass("mega-animating")},a)};i.hideAllPanels=function(){e(".mega-toggle-on > a.mega-menu-link",t).each(function(){i.hidePanel(e(this),false)})};i.hideSiblingPanels=function(n,a){n.parent().parent().find(".mega-toggle-on").children("a.mega-menu-link").each(function(){i.hidePanel(e(this),a)})};i.isDesktopView=function(){return Math.max(window.outerWidth,e(window).width())>i.settings.breakpoint};i.isMobileView=function(){return!i.isDesktopView()};i.showPanel=function(n){n.parent().triggerHandler("before_open_panel");n.attr("aria-expanded","true");e(".mega-animating").removeClass("mega-animating");if(i.isMobileView()&&n.parent().hasClass("mega-hide-sub-menu-on-mobile")){return}if(i.isDesktopView()&&(t.hasClass("mega-menu-horizontal")||t.hasClass("mega-menu-vertical"))&&!n.parent().hasClass("mega-collapse-children")){i.hideSiblingPanels(n,true)}if(i.isMobileView()&&t.hasClass("mega-keyboard-navigation")||i.settings.vertical_behaviour==="accordion"){i.hideSiblingPanels(n,false)}i.calculateDynamicSubmenuWidths(n);if(n.parent().hasClass("mega-collapse-children")||i.settings.effect==="slide"||i.isMobileView()&&(i.settings.effect_mobile==="slide"||i.settings.effect_mobile==="slide_left"||i.settings.effect_mobile==="slide_right")){var a=i.isMobileView()?i.settings.effect_speed_mobile:i.settings.effect_speed;n.siblings(".mega-sub-menu").css("display","none").animate({height:"show",paddingTop:"show",paddingBottom:"show",minHeight:"show"},a,function(){e(this).css("display","")})}n.parent().addClass("mega-toggle-on").triggerHandler("open_panel")};i.hidePanel=function(n,a){n.parent().triggerHandler("before_close_panel");n.attr("aria-expanded","false");if(n.parent().hasClass("mega-collapse-children")||!a&&i.settings.effect==="slide"||i.isMobileView()&&(i.settings.effect_mobile==="slide"||i.settings.effect_mobile==="slide_left"||i.settings.effect_mobile==="slide_right")){var t=i.isMobileView()?i.settings.effect_speed_mobile:i.settings.effect_speed;n.siblings(".mega-sub-menu").animate({height:"hide",paddingTop:"hide",paddingBottom:"hide",minHeight:"hide"},t,function(){n.siblings(".mega-sub-menu").css("display","");n.parent().removeClass("mega-toggle-on").triggerHandler("close_panel")});return}if(a){n.siblings(".mega-sub-menu").css("display","none").delay(i.settings.effect_speed).queue(function(){e(this).css("display","").dequeue()})}n.siblings(".mega-sub-menu").find(".widget_media_video video").each(function(){this.player.pause()});n.parent().removeClass("mega-toggle-on").triggerHandler("close_panel");i.addAnimatingClass(n.parent())};i.calculateDynamicSubmenuWidths=function(n){if(n.parent().hasClass("mega-menu-megamenu")&&n.parent().parent().hasClass("max-mega-menu")&&i.settings.panel_width&&e(i.settings.panel_width).length>0){if(i.isDesktopView()){var a=t.offset();var s=e(i.settings.panel_width).offset();n.siblings(".mega-sub-menu").css({width:e(i.settings.panel_width).outerWidth(),left:s.left-a.left+"px"})}else{n.siblings(".mega-sub-menu").css({width:"",left:""})}}if(n.parent().hasClass("mega-menu-megamenu")&&n.parent().parent().hasClass("max-mega-menu")&&i.settings.panel_inner_width&&e(i.settings.panel_inner_width).length>0){var l=0;if(e(i.settings.panel_inner_width).length){l=parseInt(e(i.settings.panel_inner_width).width(),10)}else{l=parseInt(i.settings.panel_inner_width,10)}var o=parseInt(n.siblings(".mega-sub-menu").innerWidth(),10);if(i.isDesktopView()&&l>0&&l<o){n.siblings(".mega-sub-menu").css({paddingLeft:(o-l)/2+"px",paddingRight:(o-l)/2+"px"})}else{n.siblings(".mega-sub-menu").css({paddingLeft:"",paddingRight:""})}}};var g=function(){var n=false;e(document).on({touchmove:function(e){n=true},touchstart:function(e){n=false}});e(document).on("click touchend",function(a){if(!n&&i.settings.document_click==="collapse"&&!e(a.target).closest(".max-mega-menu li").length&&!e(a.target).closest(".mega-menu-toggle").length){i.hideAllPanels();i.hideMobileMenu()}n=false});var a=e("li.mega-menu-megamenu li.mega-menu-item-has-children.mega-collapse-children > a.mega-menu-link");var t=e("> a.mega-menu-link",m).add(a);t.on("touchend.megamenu",function(e){i.unbindHoverEvents();i.unbindHoverIntentEvents()});t.on("click.megamenu",function(a){if(i.isDesktopView()&&e(this).parent().hasClass("mega-toggle-on")&&e(this).parent().parent().parent().hasClass("mega-menu-tabbed")){if(i.settings.second_click==="go"){return}else{a.preventDefault();return}}if(n){return}if(i.isMobileView()&&e(this).parent().hasClass("mega-hide-sub-menu-on-mobile")){return}if((i.settings.second_click==="go"||e(this).parent().hasClass("mega-click-click-go"))&&e(this).attr("href")!==undefined){if(!e(this).parent().hasClass("mega-toggle-on")){a.preventDefault();i.showPanel(e(this))}}else{a.preventDefault();if(e(this).parent().hasClass("mega-toggle-on")){i.hidePanel(e(this),false)}else{i.showPanel(e(this))}}})};var r=function(){m.on({"mouseenter.megamenu":function(){i.unbindClickEvents();if(!e(this).hasClass("mega-toggle-on")){i.showPanel(e(this).children("a.mega-menu-link"))}},"mouseleave.megamenu":function(){if(e(this).hasClass("mega-toggle-on")&&!e(this).hasClass("mega-disable-collapse")&&!e(this).parent().parent().hasClass("mega-menu-tabbed")){i.hidePanel(e(this).children("a.mega-menu-link"),false)}}})};var u=function(){m.hoverIntent({over:function(){i.unbindClickEvents();if(!e(this).hasClass("mega-toggle-on")){i.showPanel(e(this).children("a.mega-menu-link"))}},out:function(){if(e(this).hasClass("mega-toggle-on")&&!e(this).hasClass("mega-disable-collapse")&&!e(this).parent().parent().hasClass("mega-menu-tabbed")){i.hidePanel(e(this).children("a.mega-menu-link"),false)}},timeout:megamenu.timeout,interval:megamenu.interval})};var d=function(){var n=9;var a=27;var l=13;var o=37;var g=39;var r=32;t.parent().on("keyup.megamenu",function(e){var a=e.keyCode||e.which;if(a===n){t.parent().addClass("mega-keyboard-navigation")}});t.parent().on("keydown.megamenu",function(n){var a=n.keyCode||n.which;var s=e(n.target);if(a===r&&s.is(".mega-menu-link")&&t.parent().hasClass("mega-keyboard-navigation")){n.preventDefault();if(s.parent().is(m)){if(s.parent().hasClass("mega-toggle-on")&&!s.parent().parent().parent().hasClass("mega-menu-tabbed")){i.hidePanel(s)}else{i.showPanel(s)}}}});t.parent().on("keyup.megamenu",function(r){var u=r.keyCode||r.which;var d=e(r.target);if(u===n&&t.parent().hasClass("mega-keyboard-navigation")){if(d.parent().is(m)&&d.is("[href]")!==false){i.showPanel(d)}else{if(!d.parent().parent().parent().hasClass("mega-menu-tabbed")){i.hideSiblingPanels(d)}}}if(u===a&&t.parent().hasClass("mega-keyboard-navigation")){var f=e("> .mega-toggle-on",t).length!==0;e("> .mega-toggle-on > a.mega-menu-link",t).focus();i.hideAllPanels();if(i.isMobileView()&&!f){i.hideMobileMenu();e(".mega-menu-toggle-block, button.mega-toggle-animated",s).first().focus()}}if(u===l&&t.parent().hasClass("mega-keyboard-navigation")){if(d.hasClass("mega-menu-toggle-block")){if(s.hasClass("mega-menu-open")){i.hideMobileMenu()}else{i.showMobileMenu()}}if(d.parent().is(m)&&d.is("[href]")===false){if(d.parent().hasClass("mega-toggle-on")&&!d.parent().parent().parent().hasClass("mega-menu-tabbed")){i.hidePanel(d)}else{i.showPanel(d)}}}if(u===g&&i.isDesktopView()&&t.parent().hasClass("mega-keyboard-navigation")&&t.hasClass("mega-menu-horizontal")){var h=e("> .mega-toggle-on",t).nextAll("li.mega-menu-item:visible").find("> a.mega-menu-link, .mega-search input[type=text]").first();if(h.length===0){h=e(":focus",t).parent().nextAll("li.mega-menu-item:visible").find("> a.mega-menu-link, .mega-search input[type=text]").first()}h.focus();if(h.parent().is(m)&&h.is("[href]")!==false){i.showPanel(h)}else{i.hideSiblingPanels(h)}}if(u===o&&i.isDesktopView()&&t.parent().hasClass("mega-keyboard-navigation")&&t.hasClass("mega-menu-horizontal")){var c=e("> .mega-toggle-on",t).prevAll("li.mega-menu-item:visible").find("> a.mega-menu-link, .mega-search input[type=text]").last();if(c.length===0){c=e(":focus",t).parent().prevAll("li.mega-menu-item:visible").find("> a.mega-menu-link, .mega-search input[type=text]").last()}c.focus();if(c.parent().is(m)&&c.is("[href]")!==false){i.showPanel(c)}else{i.hideSiblingPanels(c)}}});t.parent().on("focusout.megamenu",function(e){if(t.parent().hasClass("mega-keyboard-navigation")){setTimeout(function(){var e=t.parent().find(":focus").length>0;if(!e){t.parent().removeClass("mega-keyboard-navigation");i.hideAllPanels();i.hideMobileMenu()}},10)}})};i.unbindAllEvents=function(){e("ul.mega-sub-menu, li.mega-menu-item, li.mega-menu-row, li.mega-menu-column, a.mega-menu-link, span.mega-indicator",n).off().unbind()};i.unbindClickEvents=function(){e("> a.mega-menu-link",m).off("click.megamenu touchend.megamenu")};i.unbindHoverEvents=function(){m.unbind("mouseenter.megamenu mouseleave.megamenu")};i.unbindHoverIntentEvents=function(){m.unbind("mouseenter mouseleave").removeProp("hoverIntent_t").removeProp("hoverIntent_s")};i.unbindKeyboardEvents=function(){t.parent().off("keyup.megamenu keydown.megamenu focusout.megamenu")};i.unbindMegaMenuEvents=function(){if(i.settings.event==="hover_intent"){i.unbindHoverIntentEvents()}if(i.settings.event==="hover"){i.unbindHoverEvents()}i.unbindClickEvents();i.unbindKeyboardEvents()};i.bindMegaMenuEvents=function(){if(i.isDesktopView()&&i.settings.event==="hover_intent"){u()}if(i.isDesktopView()&&i.settings.event==="hover"){r()}g();d()};i.monitorView=function(){if(i.isDesktopView()){t.data("view","desktop")}else{t.data("view","mobile");i.switchToMobile()}i.checkWidth();e(window).resize(function(){i.checkWidth()})};i.checkWidth=function(){if(i.isMobileView()&&t.data("view")==="desktop"){t.data("view","mobile");i.switchToMobile()}if(i.isDesktopView()&&t.data("view")==="mobile"){t.data("view","desktop");i.switchToDesktop()}i.calculateDynamicSubmenuWidths(e("> li.mega-menu-megamenu > a.mega-menu-link",t))};i.reverseRightAlignedItems=function(){if(!e("body").hasClass("rtl")){t.append(t.children("li.mega-item-align-right").get().reverse())}};i.addClearClassesToMobileItems=function(){e(".mega-menu-row",t).each(function(){e("> .mega-sub-menu > .mega-menu-column:not(.mega-hide-on-mobile)",e(this)).filter(":even").addClass("mega-menu-clear")})};i.switchToMobile=function(){i.unbindMegaMenuEvents();i.bindMegaMenuEvents();i.reverseRightAlignedItems();i.addClearClassesToMobileItems();i.hideAllPanels()};i.switchToDesktop=function(){i.unbindMegaMenuEvents();i.bindMegaMenuEvents();i.reverseRightAlignedItems();i.hideAllPanels();t.css({width:"",left:"",display:""});s.removeClass("mega-menu-open")};i.initToggleBar=function(){s.on("click",function(n){if(e(n.target).is(".mega-menu-toggle, .mega-menu-toggle-block, .mega-menu-toggle-animated-block, .mega-menu-toggle-animated-block *, .mega-toggle-blocks-left, .mega-toggle-blocks-center, .mega-toggle-blocks-right, .mega-toggle-label, .mega-toggle-label span")){if(e(this).hasClass("mega-menu-open")){i.hideMobileMenu()}else{i.showMobileMenu()}}})};i.hideMobileMenu=function(){if(!s.is(":visible")){return}l=setTimeout(function(){e("body").removeClass(t.attr("id")+"-mobile-open");e("html").removeClass(t.attr("id")+"-off-canvas-open")},i.settings.effect_speed_mobile);e(".mega-toggle-label, .mega-toggle-animated",s).attr("aria-expanded","false");if(i.settings.effect_mobile==="slide"){t.animate({height:"hide"},i.settings.effect_speed_mobile,function(){t.css({width:"",left:"",display:""})})}s.removeClass("mega-menu-open")};i.showMobileMenu=function(){if(!s.is(":visible")){return}clearTimeout(l);e("body").addClass(t.attr("id")+"-mobile-open");if(i.settings.effect_mobile==="slide_left"||i.settings.effect_mobile==="slide_right"){e("html").addClass(t.attr("id")+"-off-canvas-open")}e(".mega-toggle-label, .mega-toggle-animated",s).attr("aria-expanded","true");i.toggleBarForceWidth();if(i.settings.effect_mobile==="slide"){t.animate({height:"show"},i.settings.effect_speed_mobile)}s.addClass("mega-menu-open")};i.toggleBarForceWidth=function(){if(e(i.settings.mobile_force_width).length&&(i.settings.effect_mobile=="slide"||i.settings.effect_mobile=="disabled")){var n=s.offset();var a=e(i.settings.mobile_force_width).offset();t.css({width:e(i.settings.mobile_force_width).outerWidth(),left:a.left-n.left+"px"})}};i.init=function(){t.triggerHandler("before_mega_menu_init");i.settings=e.extend({},o,a);t.removeClass("mega-no-js");i.initToggleBar();if(i.settings.unbind_events==="true"){i.unbindAllEvents()}e("span.mega-indicator",t).on("click.megamenu",function(n){n.preventDefault();n.stopPropagation();if(e(this).parent().parent().hasClass("mega-toggle-on")){if(!e(this).parent().parent().parent().parent().hasClass("mega-menu-tabbed")||i.isMobileView()){i.hidePanel(e(this).parent(),false)}}else{i.showPanel(e(this).parent(),false)}});e(window).on("load",function(){i.calculateDynamicSubmenuWidths(e("> li.mega-menu-megamenu > a.mega-menu-link",t))});i.bindMegaMenuEvents();i.monitorView();t.triggerHandler("after_mega_menu_init")};i.init()};e.fn.maxmegamenu=function(n){return this.each(function(){if(undefined===e(this).data("maxmegamenu")){var a=new e.maxmegamenu(this,n);e(this).data("maxmegamenu",a)}})};e(function(){e(".max-mega-menu").maxmegamenu()})})(jQuery);